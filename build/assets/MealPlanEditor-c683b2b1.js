import{c as O,r as l,j as a,C as S,a as k,b as q,d as L,X as I}from"./index-c9aac779.js";import{P as R}from"./plus-3deaaec1.js";const z=O("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),G=({onSave:j,onCancel:b,initialPlan:p=null,nutritionData:m={},isEditing:v=!1})=>{var g,f;const[r,y]=l.useState("LUNEDÌ"),[i,N]=l.useState("Colazione"),[s,o]=l.useState({name:"",quantity:"",nutrition:{calories:"",protein:"",carbs:"",fat:""}}),[d,c]=l.useState(()=>p?JSON.parse(JSON.stringify(p)):{LUNEDÌ:{},MARTEDÌ:{},MERCOLEDÌ:{},GIOVEDÌ:{},VENERDÌ:{},SABATO:{},DOMENICA:{}}),h=["LUNEDÌ","MARTEDÌ","MERCOLEDÌ","GIOVEDÌ","VENERDÌ","SABATO","DOMENICA"],x=["Colazione","Spuntino Matt.","Pranzo","Merenda","Cena"];l.useEffect(()=>{const e={...d};h.forEach(t=>{e[t]||(e[t]={}),x.forEach(n=>{e[t][n]||(e[t][n]=[])})}),c(e)},[]);const C=e=>{o(t=>{const n=m[e]||{calories:"",protein:"",carbs:"",fat:""};return{...t,name:e,nutrition:n}})},E=()=>{s.name.trim()&&(c(e=>{const t={...e};t[r][i]||(t[r][i]=[]);const n={item:`${s.name}${s.quantity?`: ${s.quantity}`:""}`,nutrition:s.nutrition};return t[r][i].push(n),t}),o({name:"",quantity:"",nutrition:{calories:"",protein:"",carbs:"",fat:""}}))},M=e=>{e.trim()&&c(t=>{const n={...t};return n[r][i]||(n[r][i]=[]),n[r][i].push([e]),n})},A=(e,t,n)=>{c(P=>{const u={...P};return u[e][t]=u[e][t].filter((F,w)=>w!==n),u})},D=()=>{if(!Object.values(d).some(t=>Object.values(t).some(n=>n.length>0))){alert("Inserisci almeno un pasto prima di salvare il piano.");return}j(d)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(S,{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx(k,{children:a.jsx(q,{children:v?"Modifica Piano":"Nuovo Piano"})}),a.jsxs(L,{children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("select",{value:r,onChange:e=>y(e.target.value),className:"px-3 py-2 rounded-lg border",children:h.map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("select",{value:i,onChange:e=>N(e.target.value),className:"px-3 py-2 rounded-lg border",children:x.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{id:"food-name",name:"food-name",className:"px-3 py-2 rounded-lg border",placeholder:"Nome alimento",value:s.name,onChange:e=>C(e.target.value),list:"foodsList"}),a.jsx("datalist",{id:"foodsList",children:Object.keys(m).map(e=>a.jsx("option",{value:e},e))}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("input",{id:"food-quantity",name:"food-quantity",className:"px-3 py-2 rounded-lg border",placeholder:"Quantità (es: 100g)",value:s.quantity,onChange:e=>o(t=>({...t,quantity:e.target.value}))}),a.jsxs("button",{onClick:E,className:"flex items-center justify-center px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[a.jsx(R,{className:"h-4 w-4 mr-2"}),"Aggiungi"]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[a.jsx("input",{id:"calories",name:"calories",className:"px-3 py-2 rounded-lg border",placeholder:"Calorie",type:"number",value:s.nutrition.calories,onChange:e=>o(t=>({...t,nutrition:{...t.nutrition,calories:e.target.value}}))}),a.jsx("input",{id:"protein",name:"protein",className:"px-3 py-2 rounded-lg border",placeholder:"Proteine (g)",type:"number",value:s.nutrition.protein,onChange:e=>o(t=>({...t,nutrition:{...t.nutrition,protein:e.target.value}}))}),a.jsx("input",{id:"carbs",name:"carbs",className:"px-3 py-2 rounded-lg border",placeholder:"Carb (g)",type:"number",value:s.nutrition.carbs,onChange:e=>o(t=>({...t,nutrition:{...t.nutrition,carbs:e.target.value}}))}),a.jsx("input",{id:"fat",name:"fat",className:"px-3 py-2 rounded-lg border",placeholder:"Grassi (g)",type:"number",value:s.nutrition.fat,onChange:e=>o(t=>({...t,nutrition:{...t.nutrition,fat:e.target.value}}))})]})]}),a.jsx("div",{children:a.jsx("input",{className:"w-full px-3 py-2 rounded-lg border",placeholder:"Aggiungi alternativa (es: 'o Mela, Pera (150g)')",onKeyPress:e=>{e.key==="Enter"&&(M(e.target.value),e.target.value="")}})}),a.jsxs("div",{className:"mt-4 border rounded-lg p-4",children:[a.jsxs("h3",{className:"font-medium mb-2",children:[r," - ",i]}),a.jsx("ul",{className:"space-y-1",children:(f=(g=d[r])==null?void 0:g[i])==null?void 0:f.map((e,t)=>a.jsxs("li",{className:"flex items-center justify-between",children:[a.jsx("span",{children:Array.isArray(e)?e[0]:e.item}),a.jsx("button",{onClick:()=>A(r,i,t),className:"text-red-500 hover:text-red-600",children:a.jsx(I,{className:"h-4 w-4"})})]},t))})]})]}),a.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[a.jsx("button",{onClick:b,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Annulla"}),a.jsxs("button",{onClick:D,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[a.jsx(z,{className:"h-4 w-4 mr-2 inline"}),"Salva Piano"]})]})]})]})})};export{G as default};
