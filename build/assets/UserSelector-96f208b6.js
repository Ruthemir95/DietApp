import{c as x,r as p,j as e,C as N,a as C}from"./index-c9aac779.js";import{P as k}from"./plus-3deaaec1.js";import{T as u}from"./trash-2-3ea830b3.js";const L=x("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),M=x("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),S=({currentUser:r,users:d,onUserChange:m,onDeletePlan:h,onClearAll:g,onAddManualPlan:b,onPlanUpload:v})=>{const s=p.useRef(null),[o,t]=p.useState(""),j=a=>{var l;((l=a.target.files)==null?void 0:l[0])&&v(a),s.current&&(s.current.value="")},w=()=>[["Giorno","Pasto","Alimento","Quantita","Calorie","Proteine","Carboidrati","Grassi","Alternative"],...[["Lunedì","Colazione","Pane integrale","50g","131","4","27","1","Fette biscottate"],["Lunedì","Colazione","Marmellata","20g","49","0","12","0","Miele"],["Lunedì","Spuntino Matt.","Mela","150g","77","0.4","20.6","0.3","Pera"],["Lunedì","Pranzo","Pasta integrale","80g","280","9","58","2",""],["Lunedì","Pranzo","Petto di pollo","150g","165","31","0","3.6","Tacchino"],["Lunedì","Merenda","Yogurt greco","170g","100","17","4","0",""],["Lunedì","Cena","Salmone","150g","208","22","0","13","Pesce spada"]]],f=()=>{const i=w().map(y=>y.join(",")).join(`
`),l=new Blob([i],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),c=URL.createObjectURL(l);n.setAttribute("href",c),n.setAttribute("download","template_piano_alimentare.csv"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(c)};return e.jsx(N,{className:"mb-4",children:e.jsx(C,{className:"py-3 px-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-grow",children:e.jsxs("select",{value:r||"",onChange:a=>m(a.target.value),className:"w-full px-3 py-2 rounded-lg border border-gray-200",children:[e.jsx("option",{value:"",children:"Seleziona un piano"}),d.map(a=>e.jsx("option",{value:a.id,children:a.name},a.id))]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>{var a;return(a=s.current)==null?void 0:a.click()},className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100",onMouseEnter:()=>t("upload"),onMouseLeave:()=>t(""),children:e.jsx(M,{className:"h-5 w-5"})}),o==="upload"&&e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Carica Piano CSV"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:f,className:"p-2 rounded-lg bg-green-50 text-green-600 hover:bg-green-100",onMouseEnter:()=>t("download"),onMouseLeave:()=>t(""),children:e.jsx(L,{className:"h-5 w-5"})}),o==="download"&&e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Scarica Template CSV"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:b,className:"p-2 rounded-lg bg-purple-50 text-purple-600 hover:bg-purple-100",onMouseEnter:()=>t("new"),onMouseLeave:()=>t(""),children:e.jsx(k,{className:"h-5 w-5"})}),o==="new"&&e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Nuovo Piano"})]}),r&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>h(r),className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100",onMouseEnter:()=>t("delete"),onMouseLeave:()=>t(""),children:e.jsx(u,{className:"h-5 w-5"})}),o==="delete"&&e.jsx("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-2 py-1 rounded text-xs whitespace-nowrap",children:"Elimina Piano"})]})]})]}),e.jsx("input",{ref:s,type:"file",accept:".csv",className:"hidden",onChange:j}),d.length>0&&e.jsxs("button",{onClick:()=>{window.confirm("Sei sicuro di voler eliminare tutti i piani?")&&g()},className:"w-full flex items-center justify-center px-3 py-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-100",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Elimina Tutti i Piani"})]})]})})})};export{S as default};
